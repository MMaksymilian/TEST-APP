<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head/>
<h:body>
<ui:composition template="/template/adminLayout.xhtml">
    <ui:define name="content">
        <h:form id="estateForm">
            <p:dataTable id="mainRecords"  var="mainRecord" value="#{adminEditEstate.recordModel}" selection="#{adminEditEstate.selectRecord}"
                          selectionMode="single">
                <!--<p:ajax process=":estateForm:mainRecords"/>-->
                <p:column selectionMode="single" style="width:18px" />
                <!--<f:facet name="header">-->
                    <!--#{msgs['admin.estate.table.header.edycja_nieruchomosci']}-->
                <!--</f:facet>-->
                <p:column sortBy="#{mainRecord.value}" headerText="#{msgs['estate.tree.header.nieruchomosc']}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{mainRecord.value}"/>
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{mainRecord.value}"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column>
                    <p:rowEditor />
                </p:column>

                <!--<f:facet name="footer">-->
                    <!--<p:commandButton id="viewButton" value="View" icon="ui-icon-search"-->
                                     <!--update=":form:display" oncomplete="carDialog.show()"/>-->
                <!--</f:facet>-->
            </p:dataTable>
            </h:form>
            <h:form id="listForm">
            <p:dataList style="width:200px" id="childrenList" value="#{adminEditEstate.childrenList}" var="childRecord" type="ordered" rows="5" effectSpeed="fast">
                <p:column>
                    <h:outputText value="#{childRecord.value}"/>
                    <p:commandButton icon="ui-icon-search" style=" position:absolute;left:200px" title="Edycja" process="@this" update=":listForm:childValue">
                        <f:setPropertyActionListener value="#{childRecord}" target="#{adminEditEstate.selectedRecordChild}" />
                    </p:commandButton>
                    <br />
                </p:column>
            </p:dataList>
            <p:inputText id="childValue" value="#{adminEditEstate.selectedRecordChild.value}"/>
            <p:commandButton value="#{msgs['common.button.submit']}" update=":listForm:childrenList" process="@this :listForm:childValue" action="#{adminEditEstate.saveRecordChild}"/>
            <p:messages autoUpdate="true"/>
        </h:form>
    </ui:define>
</ui:composition>
</h:body>
</html>